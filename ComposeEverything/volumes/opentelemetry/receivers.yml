---

receivers:
  prometheus/user:
    config:
      scrape_configs:
        - job_name: 'otel-collector'
          scrape_interval: 15s
          metrics_path: '/actuator/prometheus'
          static_configs:
            - targets:
              - user:8080
  filelog:
    include: ["/logs/*.log"]
    start_at: beginning
    include_file_path: true
    include_file_name: true
    operators:
      - type: regex_parser
        regex: '^(?P<time>\d{2}-\d{2}-\d{4} \d{2}:\d{2}:\d{2}\.\d{3}) \[.+?\] (?P<sev>[A-Z]*) .+? - (?P<msg>.*)$'
        timestamp:
          parse_from: attributes.time
          layout: '%d-%m-%Y %H:%M:%S'
        severity:
          parse_from: attributes.sev