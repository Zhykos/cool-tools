name: fr-zhykos-cool-tools-shop-e2e

include:
  - ../../../../Infra/docker-compose.yml # Include the docker-compose file from the Infra module

services:

  # basket-api:
  #   build: ../../../../BasketAPI-SpringBoot
  #   ports:
  #     - "9003:9003"
  #   environment:
  #     - OTEL_EXPORTER_OTLP_ENDPOINT=http://opentelemetry-collector:4318
  #   depends_on:
  #     grafana:
  #       condition: service_started

  invoice-api:
    build: ../../../../InvoiceAPI
    ports:
      - "9005:9005"
    environment:
      - QUARKUS_OTEL_EXPORTER_OTLP_ENDPOINT=http://opentelemetry-collector:4317
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
    depends_on:
      grafana:
        condition: service_started
      kafka:
        condition: service_started
      papermerge-web:
        condition: service_started

  # product-api:
  #   build: ../../../../ProductAPI
  #   ports:
  #     - "9002:9002"
  #   environment:
  #     - OTEL_EXPORTER_OTLP_ENDPOINT=http://opentelemetry-collector:4318
  #     - SPRING_R2DBC_URL=r2dbc:postgresql://${EXTERNAL_IP}:9012/db
  #   depends_on:
  #     grafana:
  #       condition: service_started
  #     postgres-products:
  #       condition: service_started
  
  # user-api:
  #   build: ../../../../UserAPI
  #   ports:
  #     - "9001:9001"
  #   environment:
  #     - OTEL_EXPORTER_OTLP_ENDPOINT=http://opentelemetry-collector:4318
  #   depends_on:
  #     grafana:
  #       condition: service_started